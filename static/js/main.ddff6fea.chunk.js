(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{223:function(e,t,n){},270:function(e,t){},272:function(e,t){},295:function(e,t,n){},298:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(17),i=n.n(c),s=(n(223),n(10)),r=n(85),o=n(383),l=n(389),d=n(367),j=n(378),u=n(31),b=n(384),m=n(388),h=n(116),p=n.n(h),O=n(386),x=n(387),f=n(185),g=n(385),v=n(78),w=n.n(v),y=n(40),C=(n(152),n(22)),N=n(382),S=n(390),I=n(2);function k(e){return Object(I.jsxs)(O.a,Object(r.a)(Object(r.a)({variant:"body2",color:"text.secondary",align:"center"},e),{},{children:["Copyright \xa9 ",Object(I.jsx)(u.b,{color:"inherit",href:"https://mui.com/",children:"Your Website"})," ",(new Date).getFullYear()]}))}var D=Object(f.a)(),T=function(){var e=Object(C.f)();window.addEventListener("popstate",(function(){e.push("/"),window.location.replace("/")}));var t=Object(a.useState)(!1),n=Object(s.a)(t,2),c=n[0],i=n[1];window.addEventListener("popstate",(function(){e.push("/"),window.location.replace("/")}));return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(g.a,{theme:D,children:Object(I.jsxs)(x.a,{component:"main",maxWidth:"xs",children:[Object(I.jsx)(d.a,{}),Object(I.jsxs)(m.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(I.jsx)(o.a,{sx:{m:1,bgcolor:"secondary.main"},children:Object(I.jsx)(p.a,{})}),Object(I.jsx)(O.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(I.jsxs)(m.a,{component:"form",onSubmit:function(t){t.preventDefault(),i(!0);var n=new FormData(t.currentTarget),a={email:n.get("email"),password:n.get("password")};w.a.post("https://videocall-zoomish.herokuapp.com/login",a).then((function(t){sessionStorage.setItem("accesToken",JSON.stringify(t.data.data)),y.b.success("Login Sucessfully",{position:"top-center",autoClose:5e3}),e.push("/dashboard"),i(!1)})).catch((function(e){console.log(e.message),i(!1),"Request failed with status code 401"===e.message&&y.b.error("Invalid Password!",{position:"top-right",autoClose:3e3}),"Request failed with status code 400"===e.message&&y.b.error("Email Not Registered",{position:"top-right",autoClose:3e3}),"Request failed with status code 500"===e.message&&y.b.error("Try Again Later",{position:"top-right",autoClose:3e3}),(e.message="Network Error")&&y.b.error("Try Again Later",{position:"top-right",autoClose:3e3})}))},validate:!0,sx:{mt:1},children:[Object(I.jsx)(j.a,{margin:"normal",required:!0,type:"email",fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email"}),Object(I.jsx)(j.a,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"}),Object(I.jsx)(l.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Sign In"}),Object(I.jsxs)(b.a,{container:!0,children:[Object(I.jsx)(b.a,{item:!0,xs:!0,children:Object(I.jsx)(u.b,{href:"#",variant:"body2",children:"Forgot password?"})}),Object(I.jsx)(b.a,{item:!0,children:Object(I.jsxs)(u.b,{to:"/signup",children:[" ","Don't have an account? Sign Up"]})})]})]})]}),Object(I.jsx)(k,{sx:{mt:8,mb:4}})]})}),Object(I.jsx)(N.a,{sx:{color:"#fff",zIndex:function(e){return e.zIndex.drawer+1}},open:c,children:Object(I.jsx)(S.a,{color:"inherit"})}),Object(I.jsx)(y.a,{})]})},E=n(137),L=n.n(E),z=n(180),F=n(391),W=n(380);function R(e){return Object(I.jsxs)(O.a,Object(r.a)(Object(r.a)({variant:"body2",color:"text.secondary",align:"center"},e),{},{children:["Copyright \xa9 ",Object(I.jsx)(u.b,{color:"inherit",href:"https://mui.com/",children:"Your Website"}),(new Date).getFullYear()]}))}var A=Object(f.a)(),U=function(){var e=Object(a.useState)(!1),t=Object(s.a)(e,2),n=t[0],c=t[1],i=function(){var e=Object(z.a)(L.a.mark((function e(t){var n,a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),c(!0),n=new FormData(t.currentTarget),a={email:n.get("email"),password:n.get("password"),firstName:n.get("firstName")},w.a.post("https://videocall-zoomish.herokuapp.com/register",a).then((function(e){console.log(e),c(!1),y.b.success("Registered Sucessfully",{position:"top-center",autoClose:3e3})})).catch((function(e){y.b.error("Try Again Later",{position:"top-center",autoClose:3e3}),c(!1)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(g.a,{theme:A,children:Object(I.jsxs)(x.a,{component:"main",maxWidth:"xs",children:[Object(I.jsx)(d.a,{}),Object(I.jsxs)(m.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(I.jsx)(o.a,{sx:{m:1,bgcolor:"secondary.main"},children:Object(I.jsx)(p.a,{})}),Object(I.jsx)(O.a,{component:"h1",variant:"h5",children:"Sign up"}),Object(I.jsxs)(m.a,{component:"form",Validate:!0,onSubmit:i,sx:{mt:3},children:[Object(I.jsxs)(b.a,{container:!0,spacing:2,children:[Object(I.jsx)(b.a,{item:!0,xs:12,sm:12,children:Object(I.jsx)(j.a,{autoComplete:"given-name",name:"firstName",required:!0,fullWidth:!0,id:"firstName",label:"First Name"})}),Object(I.jsx)(b.a,{item:!0,xs:12,children:Object(I.jsx)(j.a,{type:"email",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email"})}),Object(I.jsx)(b.a,{item:!0,xs:12,children:Object(I.jsx)(j.a,{required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"new-password"})}),Object(I.jsx)(b.a,{item:!0,xs:12,children:Object(I.jsx)(F.a,{control:Object(I.jsx)(W.a,{value:"allowExtraEmails",color:"primary"}),label:"I want to receive inspiration, marketing promotions and updates via email."})})]}),Object(I.jsx)(l.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Sign Up"}),Object(I.jsx)(b.a,{container:!0,justifyContent:"flex-end",children:Object(I.jsx)(b.a,{item:!0,children:Object(I.jsxs)(u.b,{to:"/",children:[" ","Already have an account? Sign in"]})})})]})]}),Object(I.jsx)(R,{sx:{mt:5}})]})}),Object(I.jsx)(N.a,{sx:{color:"#fff",zIndex:function(e){return e.zIndex.drawer+1}},open:n,children:Object(I.jsx)(S.a,{color:"inherit"})}),Object(I.jsx)(y.a,{})]})},q=n(375),P=n(376),J=n(379),Y=n(184),B=n.n(Y),_=n(138),K=n.n(_),M=n(181),V=n(120),G=n.n(V),H=n(182),Q=n.n(H),X=n(392),Z=n(371),$=n(183),ee=n.n($),te=(n(295),n(377)),ne=Object(Z.a)((function(e){return{search:{position:"relative",borderRadius:12,backgroundColor:"#d6d6d6"},searchIcon:{height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:{padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"}}})),ae=Q.a.connect("https://videocall-zoomish.herokuapp.com");var ce=function(){var e=ne(),t=Object(C.f)(),n=Object(a.useState)([]),c=Object(s.a)(n,2),i=c[0],r=c[1],o=Object(a.useState)(!1),l=Object(s.a)(o,2),d=l[0],j=l[1],u=Object(a.useState)(""),b=Object(s.a)(u,2),m=b[0],h=b[1],p=Object(a.useState)(),O=Object(s.a)(p,2),x=O[0],f=O[1],g=Object(a.useState)(!1),v=Object(s.a)(g,2),y=v[0],S=v[1],k=Object(a.useState)(""),D=Object(s.a)(k,2),T=D[0],E=D[1],L=Object(a.useState)(),z=Object(s.a)(L,2),F=z[0],W=z[1],R=Object(a.useState)(""),A=Object(s.a)(R,2),U=A[0],Y=A[1],_=Object(a.useState)(!1),V=Object(s.a)(_,2),H=V[0],Q=V[1],Z=Object(a.useState)(""),$=Object(s.a)(Z,2),ce=$[0],ie=$[1],se=Object(a.useState)(!1),re=Object(s.a)(se,2),oe=re[0],le=re[1],de=Object(a.useState)(""),je=Object(s.a)(de,2),ue=je[0],be=je[1],me=Object(a.useRef)(),he=Object(a.useRef)(),pe=Object(a.useRef)(),Oe=JSON.parse(sessionStorage.getItem("accesToken"));window.addEventListener("popstate",(function(){t.push("/dashboard"),window.location.replace("/dashboard")})),Object(a.useEffect)((function(){navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){f(e),me.current.srcObject=e})),ae.on("me",(function(e){h(e)})),ae.on("callUser",(function(e){S(!0),E(e.from),be(e.name),W(e.signal)})),ae.on("callSearchUser",(function(e){S(!0),j(!1),E(e.from),be(e.name),W(e.signal)})),ae.emit("currentUser",Oe._id)}),[]),Object(a.useEffect)((function(){w.a.get("https://videocall-zoomish.herokuapp.com/registers").then((function(e){var t=e.data.filter((function(e){return e.email!==Oe.email}));r(t)})).catch((function(e){console.log(e)}))}),[]);var xe=function(){le(!0),j(!1),window.location.reload()};return Object(I.jsx)(I.Fragment,{children:Object(I.jsxs)("div",{className:"main",children:[Object(I.jsxs)("div",{className:"d-flex justify-content-around",children:[Object(I.jsxs)("h3",{className:"header",children:["Takeleap :",Object(I.jsxs)("span",{style:{color:"rgb(255 139 0)"},children:["Welcome ",Oe.firstName]})]}),Object(I.jsx)("button",{className:"btn btn-danger mt-1",onClick:function(){sessionStorage.clear(),t.push("/")},children:"Logout"})]}),Object(I.jsxs)("div",{className:"container mt-2",children:[Object(I.jsxs)("div",{className:"video-container d-flex justify-content-around",children:[Object(I.jsx)("div",{className:"video",children:x&&Object(I.jsx)("video",{playsInline:!0,muted:!0,ref:me,className:"vid",autoPlay:!0,style:{width:"400px"}})}),Object(I.jsx)("div",{className:"video",children:H&&!oe?Object(I.jsx)("video",{className:"vid",playsInline:!0,ref:he,autoPlay:!0,style:{width:"400px"}}):Object(I.jsxs)("div",{className:"search pl-2",children:[Object(I.jsxs)("div",{className:e.search,children:[Object(I.jsx)("div",{className:e.searchIcon,children:Object(I.jsx)(ee.a,{})}),Object(I.jsx)(X.a,{placeholder:"Search\u2026",classes:{root:e.inputRoot,input:e.inputInput},inputProps:{"aria-label":"search"},onChange:function(e){Y(e.target.value)},value:U})]}),Object(I.jsx)("div",{className:"searchList",children:i.filter((function(e){return""===U||e.firstName.toLowerCase().includes(U.toLowerCase())?e:void 0})).map((function(e,t){return Object(I.jsxs)("div",{className:"block",children:[Object(I.jsx)("div",{className:"searchname",children:e.firstName}),Object(I.jsx)("div",{children:Object(I.jsx)(te.a,{title:"Call",placement:"right-start",children:Object(I.jsx)(K.a,{className:"phoneIcon",fontSize:"small",onClick:function(){return function(e){j(!0);var t=new G.a({initiator:!0,trickle:!1,stream:x});t.on("signal",(function(t){ae.emit("callSearchUser",{userToCall:e,myCall:Oe._id,signalData:t,from:m,name:Oe.firstName})})),t.on("stream",(function(e){he.current.srcObject=e})),ae.on("callAccepted",(function(e){Q(!0),j(!1),t.signal(e)})),pe.current=t}(e._id)}})})})]},t)}))})]})})]}),Object(I.jsxs)("div",{className:"myId mt-2",children:[Object(I.jsx)("div",{children:Object(I.jsx)(M.CopyToClipboard,{text:m,style:{marginBottom:"2rem"},children:Object(I.jsx)(q.a,{variant:"contained",color:"primary",startIcon:Object(I.jsx)(B.a,{fontSize:"large"}),children:"Copy ID"})})}),Object(I.jsx)(J.a,{id:"filled-basic",label:"ID to call",variant:"filled",value:ce,onChange:function(e){return ie(e.target.value)}}),Object(I.jsxs)("div",{className:"call-button",children:[H&&!oe?Object(I.jsx)(q.a,{variant:"contained",color:"secondary",onClick:function(){le(!0),pe.current.destroy(),window.location.reload()},children:"End Call"}):Object(I.jsx)(te.a,{title:"Call",children:Object(I.jsx)(P.a,{color:"primary","aria-label":"call",onClick:function(){return function(e){var t=new G.a({initiator:!0,trickle:!1,stream:x});t.on("signal",(function(t){ae.emit("callUser",{userToCall:e,signalData:t,from:m,name:ue})})),t.on("stream",(function(e){he.current.srcObject=e})),ae.on("callAccepted",(function(e){Q(!0),t.signal(e)})),pe.current=t}(ce)},children:Object(I.jsx)(K.a,{fontSize:"large",className:"phoneIcon"})})}),ce?"ID To Call:":""," ",ce]})]}),Object(I.jsx)("div",{children:y&&!H?Object(I.jsxs)("div",{className:"caller",children:[Object(I.jsxs)("h1",{className:"caliing",children:[ue||"UnKnown"," is calling..."]}),Object(I.jsx)(q.a,{variant:"contained",color:"primary",onClick:function(){Q(!0),j(!1);var e=new G.a({initiator:!1,trickle:!1,stream:x});e.on("signal",(function(e){ae.emit("answerCall",{signal:e,to:T})})),e.on("stream",(function(e){he.current.srcObject=e})),e.signal(F),pe.current=e},children:"Answer"}),Object(I.jsx)(q.a,{variant:"contained",color:"secondary",onClick:xe,children:"Cancel Call"})]}):null})]}),Object(I.jsx)(N.a,{sx:{color:"#fff",zIndex:function(e){return e.zIndex.drawer+1}},open:d,children:Object(I.jsx)("button",{className:"btn btn-danger",onClick:xe,children:"cancelCall"})})]})})};var ie=function(){return Object(I.jsxs)(C.c,{children:[Object(I.jsx)(C.a,{exact:!0,path:"/",component:T}),Object(I.jsx)(C.a,{path:"/signup",component:U}),Object(I.jsx)(C.a,{path:"/dashboard",component:ce})]})},se=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,395)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),i(e),s(e)}))};i.a.render(Object(I.jsx)(u.a,{children:Object(I.jsx)(ie,{})}),document.getElementById("root")),se()}},[[298,1,2]]]);
//# sourceMappingURL=main.ddff6fea.chunk.js.map